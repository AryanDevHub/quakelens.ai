import{c as j,r as s,j as e,m as p,T as f,C as b,A as h,G as v,a as w}from"./index-CRF0AgdN.js";const V=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],g=j("scan",V);function N(){const c=s.useRef(null),a=s.useRef(null),[o,i]=s.useState(!1),[u,l]=s.useState(null),m=s.useCallback(async()=>{try{if(l(null),typeof window<"u"&&window.location.protocol!=="https:"&&window.location.hostname!=="localhost")throw new Error("Camera access requires HTTPS. Please use a secure connection.");const t=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}},audio:!1});a.current=t,c.current&&(c.current.srcObject=t,i(!0))}catch(t){const r=t instanceof Error?t.message:"Failed to access camera";l(r),i(!1),console.error("Camera error:",t)}},[]),n=s.useCallback(()=>{a.current&&(a.current.getTracks().forEach(t=>t.stop()),a.current=null),c.current&&(c.current.srcObject=null),i(!1)},[]),x=s.useCallback(()=>{if(!c.current||!o)return null;const t=document.createElement("canvas");t.width=c.current.videoWidth,t.height=c.current.videoHeight;const r=t.getContext("2d");return r?(r.drawImage(c.current,0,0),t.toDataURL("image/jpeg",.8)):null},[o]);return s.useEffect(()=>()=>{n()},[n]),{videoRef:c,isActive:o,error:u,startCamera:m,stopCamera:n,takeSnapshot:x}}const k=[{label:"Shear_Crack",confidence:.94,bbox:{x:10,y:20,width:24,height:24}},{label:"Facade_Damage",confidence:.87,bbox:{x:60,y:40,width:20,height:20}},{label:"Column_Failure",confidence:.91,bbox:{x:30,y:60,width:18,height:18}}],C=s.memo(function({detection:a,index:o}){return e.jsx(p.div,{"code-path":"src\\components\\features\\AIVision.tsx:22:5",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:o*.15},className:"absolute border-2 border-red-500 rounded-sm shadow-[0_0_15px_rgba(239,68,68,0.5)]",style:{left:`${a.bbox.x}%`,top:`${a.bbox.y}%`,width:`${a.bbox.width}%`,height:`${a.bbox.height}%`},children:e.jsxs("span",{"code-path":"src\\components\\features\\AIVision.tsx:34:7",className:"absolute -top-6 left-0 bg-red-500 text-[8px] px-2 py-1 font-bold text-white uppercase tracking-tighter rounded whitespace-nowrap",children:[a.label,": ",(a.confidence*100).toFixed(0),"%"]})})}),S=s.memo(function(){const{videoRef:a,isActive:o,error:i,startCamera:u}=N(),[l,m]=s.useState(!1),[n,x]=s.useState(!1),[t,r]=s.useState([]),y=s.useCallback(()=>{m(!0),x(!1),setTimeout(()=>{m(!1),x(!0),r(k)},3e3)},[]),I=s.useCallback(()=>{x(!1),r([])},[]);return e.jsxs(p.div,{"code-path":"src\\components\\features\\AIVision.tsx:65:5",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[e.jsx("div",{"code-path":"src\\components\\features\\AIVision.tsx:72:7",className:"relative w-full h-80 bg-black rounded-3xl border-2 border-cyan-500/30 overflow-hidden shadow-[0_0_40px_rgba(6,182,212,0.2)]",children:i?e.jsxs("div",{"code-path":"src\\components\\features\\AIVision.tsx:74:11",className:"absolute inset-0 flex flex-col items-center justify-center p-6 text-center bg-slate-900 font-mono",children:[e.jsx(f,{"code-path":"src\\components\\features\\AIVision.tsx:75:13",className:"text-yellow-500 mb-4",size:48}),e.jsx("p",{"code-path":"src\\components\\features\\AIVision.tsx:76:13",className:"text-sm text-slate-300 mb-2 uppercase tracking-wider",children:"Camera Access Error"}),e.jsx("p",{"code-path":"src\\components\\features\\AIVision.tsx:77:13",className:"text-[10px] text-slate-500 uppercase tracking-tighter italic max-w-[250px]",children:i}),e.jsx("button",{"code-path":"src\\components\\features\\AIVision.tsx:80:13",onClick:u,className:"mt-4 px-4 py-2 bg-cyan-600/20 border border-cyan-500/30 rounded-lg text-cyan-400 text-xs uppercase tracking-wider hover:bg-cyan-600/30 transition-colors",children:"Retry Camera"})]}):o?e.jsxs(e.Fragment,{children:[e.jsx("video",{"code-path":"src\\components\\features\\AIVision.tsx:100:13",ref:a,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover opacity-70"}),e.jsx(h,{"code-path":"src\\components\\features\\AIVision.tsx:109:13",children:l&&e.jsx(p.div,{"code-path":"src\\components\\features\\AIVision.tsx:111:17",initial:{top:"-5%"},animate:{top:"105%"},exit:{opacity:0},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute left-0 right-0 h-1 bg-cyan-400 shadow-[0_0_20px_cyan] z-20"})}),e.jsx(h,{"code-path":"src\\components\\features\\AIVision.tsx:122:13",children:n&&e.jsx("div",{"code-path":"src\\components\\features\\AIVision.tsx:124:17",className:"absolute inset-0 z-10 p-6",children:t.map((d,A)=>e.jsx(C,{"code-path":"src\\components\\features\\AIVision.tsx:126:21",detection:d,index:A},d.label))})}),e.jsx("div",{"code-path":"src\\components\\features\\AIVision.tsx:133:13",className:"absolute top-4 left-4 p-2 bg-black/60 rounded-lg backdrop-blur-md text-[8px] font-mono text-cyan-400 border border-cyan-500/30 uppercase tracking-widest",children:"AI_ENGINE: YOLOv8_SEG // NPU_ACTIVE"}),n&&e.jsxs(p.div,{"code-path":"src\\components\\features\\AIVision.tsx:139:15",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"absolute top-4 right-4 p-2 bg-red-500/80 rounded-lg backdrop-blur-md text-[10px] font-bold text-white border border-red-500/50",children:[t.length," Issues Detected"]})]}):e.jsxs("div",{"code-path":"src\\components\\features\\AIVision.tsx:88:11",className:"absolute inset-0 flex flex-col items-center justify-center p-6 text-center bg-slate-900",children:[e.jsx(b,{"code-path":"src\\components\\features\\AIVision.tsx:89:13",className:"text-cyan-500 mb-4",size:48}),e.jsx("p",{"code-path":"src\\components\\features\\AIVision.tsx:90:13",className:"text-sm text-slate-300 mb-4 uppercase tracking-wider",children:"Camera Preview"}),e.jsx("button",{"code-path":"src\\components\\features\\AIVision.tsx:91:13",onClick:u,className:"px-6 py-3 bg-cyan-600 text-white rounded-xl font-bold uppercase tracking-wider text-sm hover:bg-cyan-500 transition-colors active:scale-95",children:"Start Camera"})]})}),e.jsx("div",{"code-path":"src\\components\\features\\AIVision.tsx:152:7",className:"flex gap-3",children:n?e.jsxs("button",{"code-path":"src\\components\\features\\AIVision.tsx:154:11",onClick:I,className:"flex-1 py-4 rounded-2xl font-black uppercase tracking-[0.2em] bg-slate-700 text-white hover:bg-slate-600 active:scale-95 transition-all flex items-center justify-center gap-2",children:[e.jsx(g,{"code-path":"src\\components\\features\\AIVision.tsx:158:13",size:18}),"New Scan"]}):e.jsx("button",{"code-path":"src\\components\\features\\AIVision.tsx:162:11",onClick:y,disabled:l||!o,className:"flex-1 py-4 rounded-2xl font-black uppercase tracking-[0.2em] bg-cyan-600 text-white shadow-[0_0_25px_rgba(6,182,212,0.4)] hover:bg-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 transition-all flex items-center justify-center gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx(p.div,{"code-path":"src\\components\\features\\AIVision.tsx:169:17",animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},children:e.jsx(g,{"code-path":"src\\components\\features\\AIVision.tsx:173:19",size:18})}),"SCANNING..."]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{"code-path":"src\\components\\features\\AIVision.tsx:179:17",size:18}),"INITIATE SCAN"]})})}),e.jsx(h,{"code-path":"src\\components\\features\\AIVision.tsx:188:7",children:n&&e.jsx(p.div,{"code-path":"src\\components\\features\\AIVision.tsx:190:11",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:e.jsx(v,{"code-path":"src\\components\\features\\AIVision.tsx:195:13",variant:"danger",borderPosition:"left",children:e.jsxs("div",{"code-path":"src\\components\\features\\AIVision.tsx:196:15",className:"flex items-start gap-3",children:[e.jsx(f,{"code-path":"src\\components\\features\\AIVision.tsx:197:17",className:"text-red-500 flex-shrink-0 mt-0.5",size:18}),e.jsxs("div",{"code-path":"src\\components\\features\\AIVision.tsx:198:17",className:"space-y-2",children:[e.jsx("p",{"code-path":"src\\components\\features\\AIVision.tsx:199:19",className:"text-xs font-bold uppercase tracking-wider text-red-400",children:"Structural Damage Detected"}),e.jsx("ul",{"code-path":"src\\components\\features\\AIVision.tsx:202:19",className:"space-y-1",children:t.map(d=>e.jsxs("li",{"code-path":"src\\components\\features\\AIVision.tsx:204:23",className:"text-[11px] text-slate-300 flex items-center gap-2",children:[e.jsx(w,{"code-path":"src\\components\\features\\AIVision.tsx:205:25",size:12,className:"text-red-500"}),d.label.replace(/_/g," ")," (",(d.confidence*100).toFixed(0),"% confidence)"]},d.label))}),e.jsx("p",{"code-path":"src\\components\\features\\AIVision.tsx:210:19",className:"text-[10px] text-slate-500 italic mt-2",children:"Recommend immediate evacuation and professional structural assessment."})]})]})})})})]})});export{S as AIVision,S as default};
